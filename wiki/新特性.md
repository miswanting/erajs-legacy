# 新特性

## 图片

- 可交互
  - 栅格图：矢量蒙版
  - 矢量图
- 格式
  - 块级别
  - 行内
  - 混合固定

## 继承树

-   Engine
-   Singleton → LogManager
-   LogManager → EventManager
-   → AudioManager
-   → CacheManager
-   → ConfigManager
-   → DataManager
-   → LockManager
-   → ModuleManager
-   → NetManager
-   → ImageManager
-   → StyleManager
-   DotPath
-   AbstractDOM
-   Tools
-   Widgets

## 热重载

- 状态信息持久化

## 样式自定义

- 定义样式协议：前后端统一

## 整体构筑

- NEW API：push

### 层级（自上到下）

- 系统（平级，nav）
- 全屏（平级，固定：div class=view）（相对：div class=pages）
- 页面（div class=page）
- 块（div class=block）
- 行内（div class=line）

## 跨平台

### 全局

- Web

### 终端

- Windows
  - 方案：Web外套一层Electron的壳。
- ios

### 移动

- Android
  - 方案：Web外套一层WebView的壳。
- ios

## 响应式

Flutter启发：

text→Widget→Element

↓                             ↑

VirtualDOM→DOM

### 生命周期

#### 控件的新建

当用户运行了a.input('test',callbackfunc)时，发生了什么？

1.  组装数据
2.  发射信号
3.  将widget装入AbstractDOM
4.  返回widget

#### 控件状态的改变（外）

1.  状态改变
2.  组装数据
3.  发射信号
4.  触发回调函数
5.  改变后端相应控件状态

#### 控件状态的改变（内）

1.  状态改变
2.  组装数据
3.  发射信号
4.  改变前端相应控件状态

#### 控件的删除

